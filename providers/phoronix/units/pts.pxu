unit: test plan
id: pts
_name: Phoronix Test Suite
include:
 pts-prepare-nest
 pts/.*
bootstrap_include:
 pts-job-generator

id: pts-job-generator
plugin: resource
command:
 echo id: pts/compress-gzip
 echo name: Gzip Compression
 echo

id: pts-prepare-nest
plugin: shell
command:
 mkdir $PLAINBOX_SESSION_SHARE/pts-nest/
 cp $PLAINBOX_PROVIDER_DATA/phoronix-test-suite-configuration/* $PLAINBOX_SESSION_SHARE/pts-nest
 sed -i "s+__TARGET_PATH__+$PLAINBOX_SESSION_SHARE\/pts-nest\/+" $PLAINBOX_SESSION_SHARE/pts-nest/user-config.xml
 

unit: template
template-resource: pts-job-generator
id: {id}
_summary: {name}
command:
 export PTS_USER_PATH_OVERRIDE=$PLAINBOX_SESSION_SHARE/pts-nest/
 $PLAINBOX_PROVIDER_DATA/phoronix-test-suite/phoronix-test-suite install {id}
 $PLAINBOX_PROVIDER_DATA/phoronix-test-suite/phoronix-test-suite batch-run {id}
plugin: shell
depends: pts-prepare-nest


